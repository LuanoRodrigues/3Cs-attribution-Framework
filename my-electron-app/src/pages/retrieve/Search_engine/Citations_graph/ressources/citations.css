/* citations.css */

:root{
  --bg: #0b0f14;
  --panel: #0f1620;
  --panel2: #0d131c;
  --line: rgba(255,255,255,.08);
  --text: rgba(255,255,255,.88);
  --muted: rgba(255,255,255,.62);
  --faint: rgba(255,255,255,.42);
  --accent: #6aa8ff;
  --accent2: #7bf0c5;
  --warn: #ffcc66;

  --intext: #6aa8ff;
  --footnote: #7bf0c5;
  --group: rgba(255,255,255,.28);

  --shadow: 0 18px 50px rgba(0,0,0,.45);
  --radius: 14px;
  --radius2: 10px;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }
body{
  margin: 0;
  background: radial-gradient(1200px 700px at 20% 5%, rgba(106,168,255,.15), transparent 55%),
              radial-gradient(1000px 700px at 80% 10%, rgba(123,240,197,.10), transparent 55%),
              radial-gradient(1100px 900px at 55% 95%, rgba(255,204,102,.06), transparent 60%),
              var(--bg);
  color: var(--text);
  font-family: var(--sans);
  line-height: 1.35;
}

a{ color: inherit; text-decoration: none; }
button, input, select{ font-family: inherit; }

.app{
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Top bar */
.topbar{
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 18px;
  padding: 18px 18px 14px 18px;
  border-bottom: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(15,22,32,.92), rgba(15,22,32,.70));
  backdrop-filter: blur(10px);
}

.brand{
  display: grid;
  gap: 4px;
}

.brand__title{
  font-size: 18px;
  font-weight: 650;
  letter-spacing: .2px;
}

.brand__subtitle{
  font-size: 12px;
  color: var(--muted);
}

.controls{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: end;
  justify-content: flex-end;
}

.control{
  display: grid;
  gap: 6px;
}

.label{
  font-size: 11px;
  color: var(--muted);
  letter-spacing: .2px;
}

.input, .select{
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--line);
  background: rgba(10,14,20,.55);
  color: var(--text);
  padding: 0 10px;
  outline: none;
  min-width: 210px;
}

.select{
  min-width: 130px;
  padding-right: 28px;
}

.input:focus, .select:focus{
  border-color: rgba(106,168,255,.55);
  box-shadow: 0 0 0 3px rgba(106,168,255,.14);
}

.btn{
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--line);
  padding: 0 12px;
  cursor: pointer;
  font-weight: 600;
  letter-spacing: .15px;
}

.btn--ghost{
  background: rgba(10,14,20,.35);
  color: var(--text);
}

.btn--ghost:hover{
  border-color: rgba(255,255,255,.16);
  background: rgba(10,14,20,.48);
}

.btn:disabled{
  opacity: .55;
  cursor: not-allowed;
}

/* Main layout */
.main{
  flex: 1;
  display: grid;
  grid-template-columns: 420px 1fr;
  min-height: 0;
}

/* Left panel */
.panel{
  border-right: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(13,19,28,.84), rgba(13,19,28,.62));
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.panel__header{
  padding: 14px 14px 10px 14px;
  border-bottom: 1px solid var(--line);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.panel__title{
  font-weight: 650;
  letter-spacing: .15px;
}

.panel__meta{
  display: flex;
  gap: 8px;
  align-items: center;
}

.pill{
  font-size: 11px;
  padding: 5px 9px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(10,14,20,.35);
  color: var(--text);
}

.pill--muted{
  color: var(--muted);
}

.list{
  padding: 10px;
  overflow: auto;
  min-height: 0;
}

.panel__footer{
  padding: 10px 14px 12px 14px;
  border-top: 1px solid var(--line);
  background: rgba(10,14,20,.22);
}

.hint{
  font-size: 11px;
  color: var(--muted);
}

/* Reference cards */
.card{
  border: 1px solid var(--line);
  background: rgba(10,14,20,.32);
  border-radius: var(--radius2);
  padding: 10px 10px 9px 10px;
  box-shadow: 0 1px 0 rgba(255,255,255,.03);
  cursor: pointer;
  user-select: none;
}

.card + .card{ margin-top: 10px; }

.card:hover{
  border-color: rgba(255,255,255,.16);
  background: rgba(10,14,20,.44);
}

.card.is-active{
  border-color: rgba(106,168,255,.55);
  box-shadow: 0 0 0 3px rgba(106,168,255,.14);
}

.card.is-pinned{
  border-color: rgba(123,240,197,.55);
  box-shadow: 0 0 0 3px rgba(123,240,197,.13);
}

.card__top{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.badges{
  display: flex;
  gap: 6px;
  align-items: center;
  flex-wrap: wrap;
}

.badge{
  font-size: 11px;
  border-radius: 999px;
  padding: 4px 8px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.03);
  color: var(--muted);
}

.badge--intext{
  border-color: rgba(106,168,255,.28);
  color: rgba(106,168,255,.95);
  background: rgba(106,168,255,.07);
}

.badge--footnote{
  border-color: rgba(123,240,197,.26);
  color: rgba(123,240,197,.95);
  background: rgba(123,240,197,.06);
}

.badge--mono{
  font-family: var(--mono);
  color: rgba(255,255,255,.78);
}

.card__title{
  font-size: 12px;
  color: var(--text);
  margin-top: 8px;
  font-weight: 650;
  letter-spacing: .15px;
}

.card__snippet{
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card__raw{
  margin-top: 8px;
  font-size: 11px;
  color: var(--faint);
  font-family: var(--mono);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Stage */
.stage{
  min-height: 0;
  display: grid;
  grid-template-rows: auto 1fr auto;
  background: linear-gradient(180deg, rgba(15,22,32,.55), rgba(11,15,20,.42));
}

.stage__header{
  padding: 14px 16px 10px 16px;
  border-bottom: 1px solid var(--line);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.stage__title{
  font-weight: 650;
  letter-spacing: .15px;
}

.stage__actions{
  display: flex;
  gap: 10px;
}

/* Detail panel content */
.detail{
  padding: 14px 16px 0 16px;
  overflow: auto;
  min-height: 0;
}

.empty{
  border: 1px dashed rgba(255,255,255,.18);
  background: rgba(10,14,20,.22);
  border-radius: var(--radius);
  padding: 18px;
}

.empty__title{
  font-weight: 650;
  letter-spacing: .15px;
}

.empty__text{
  margin-top: 6px;
  color: var(--muted);
  font-size: 12px;
}

.kv{
  display: grid;
  grid-template-columns: 160px 1fr;
  gap: 8px 12px;
  border: 1px solid var(--line);
  background: rgba(10,14,20,.22);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: 0 1px 0 rgba(255,255,255,.03);
}

.k{
  font-size: 11px;
  color: var(--muted);
  letter-spacing: .2px;
}

.v{
  font-size: 12px;
  color: var(--text);
  word-break: break-word;
}

.v.mono{
  font-family: var(--mono);
  color: rgba(255,255,255,.78);
}

.block{
  margin-top: 12px;
  border: 1px solid var(--line);
  background: rgba(10,14,20,.22);
  border-radius: var(--radius);
  padding: 14px;
}

.block__title{
  font-size: 11px;
  color: var(--muted);
  letter-spacing: .2px;
  margin-bottom: 8px;
}

.block__text{
  font-size: 12px;
  color: var(--text);
  white-space: pre-wrap;
}

.block__code{
  font-family: var(--mono);
  font-size: 11px;
  color: rgba(255,255,255,.78);
  white-space: pre-wrap;
}

/* Graph area */
.graphWrap{
  border-top: 1px solid var(--line);
  margin-top: 14px;
  padding: 12px 16px 14px 16px;
}

.graphHeader{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
}

.graphHeader__title{
  font-weight: 650;
  letter-spacing: .15px;
}

.graphHeader__meta{
  font-size: 11px;
  color: var(--muted);
  font-family: var(--mono);
}

.graph{
  border: 1px solid var(--line);
  background: rgba(10,14,20,.20);
  border-radius: var(--radius);
  padding: 10px;
  position: relative;
  box-shadow: var(--shadow);
}

.svg{
  width: 100%;
  height: 520px;
  display: block;
}

.graphLegend{
  position: absolute;
  right: 12px;
  bottom: 12px;
  display: grid;
  gap: 8px;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(10,14,20,.55);
  backdrop-filter: blur(8px);
}

.legendItem{
  font-size: 11px;
  color: var(--muted);
  display: flex;
  gap: 8px;
  align-items: center;
}

.dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
  border: 1px solid rgba(255,255,255,.12);
}

.dot--intext{ background: rgba(106,168,255,.88); }
.dot--footnote{ background: rgba(123,240,197,.88); }
.dot--group{ background: rgba(255,255,255,.26); }

/* SVG styling hooks (set by JS via classes) */
.nodeLabel{
  font-family: var(--mono);
  font-size: 12px;
  fill: rgba(255,255,255,.80);
}

.nodeSub{
  font-family: var(--sans);
  font-size: 11px;
  fill: rgba(255,255,255,.55);
}

.edge{
  stroke: rgba(255,255,255,.16);
  stroke-width: 1.4;
}

.edge.is-strong{
  stroke: rgba(255,255,255,.26);
  stroke-width: 2.2;
}

.nodeCircle{
  stroke: rgba(255,255,255,.14);
  stroke-width: 1.4;
}

.nodeCircle.is-active{
  stroke: rgba(255,204,102,.62);
  stroke-width: 2.4;
}

.nodeCircle.is-pinned{
  stroke: rgba(123,240,197,.62);
  stroke-width: 2.4;
}

/* Bottom bar */
.bottombar{
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 14px;
  border-top: 1px solid var(--line);
  background: rgba(10,14,20,.40);
}

.status{
  display: flex;
  align-items: center;
  gap: 10px;
}

.status__dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(123,240,197,.75);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 0 0 3px rgba(123,240,197,.10);
}

.status__dot.is-warn{
  background: rgba(255,204,102,.78);
  box-shadow: 0 0 0 3px rgba(255,204,102,.10);
}

.status__dot.is-bad{
  background: rgba(255,105,105,.78);
  box-shadow: 0 0 0 3px rgba(255,105,105,.10);
}

.status__text{
  font-size: 12px;
  color: var(--muted);
}

.statusRight{
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--muted);
  font-size: 12px;
}

.mono{
  font-family: var(--mono);
}

/* Scrollbar */
.list::-webkit-scrollbar,
.detail::-webkit-scrollbar{
  width: 10px;
}

.list::-webkit-scrollbar-thumb,
.detail::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.10);
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,0);
  background-clip: padding-box;
}

.list::-webkit-scrollbar-thumb:hover,
.detail::-webkit-scrollbar-thumb:hover{
  background: rgba(255,255,255,.16);
  border: 2px solid rgba(0,0,0,0);
  background-clip: padding-box;
}

/* Responsive */
@media (max-width: 1100px){
  .main{ grid-template-columns: 380px 1fr; }
  .input{ min-width: 170px; }
}

@media (max-width: 980px){
  .topbar{ align-items: stretch; flex-direction: column; }
  .controls{ justify-content: flex-start; }
}
