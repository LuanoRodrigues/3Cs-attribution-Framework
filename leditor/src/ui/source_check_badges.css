/* source_check_badges.css */

.leditor-source-check--verified {
  background: transparent;
  border-bottom: 1px solid var(--ui-success-border);
}

.leditor-source-check--needsReview {
  background: transparent;
  border-bottom: 1px solid var(--ui-danger-border);
}

.leditor-source-check--anchor.leditor-source-check--verified {
  color: var(--ui-accent);
}

.leditor-source-check--anchor.leditor-source-check--needsReview {
  color: var(--ui-danger);
}

/* Inline badge/note widgets were removed in favor of the right-side feedback rail. */

/* When the citation atom node is decorated, the class is applied on the <a.leditor-citation-anchor>. */
.leditor-citation-anchor.leditor-source-check--verified {
  color: var(--ui-accent) !important;
}

.leditor-citation-anchor.leditor-source-check--needsReview {
  color: var(--ui-danger) !important;
}

.leditor-citation-anchor.leditor-source-check--selected,
.leditor-source-check--selected {
  outline: 2px solid color-mix(in srgb, var(--ui-accent) 45%, transparent);
  outline-offset: 2px;
  border-radius: 6px;
  background: color-mix(in srgb, var(--ui-accent) 10%, transparent);
}

.leditor-source-check--pulse {
  outline: 2px solid color-mix(in srgb, var(--ui-accent) 45%, transparent);
  outline-offset: 2px;
  border-radius: 4px;
  animation: leditor-source-check-pulse 1.2s ease-out 1;
  display: inline-block;
}

.leditor-citation-anchor.leditor-source-check--pulse {
  background: color-mix(in srgb, var(--ui-accent) 10%, transparent);
  border-bottom-color: color-mix(in srgb, var(--ui-accent) 65%, transparent) !important;
}

/* Inline fix suggestion widget (shown only when source checks are visible). */
.leditor-source-check-fix {
  display: inline-block;
  position: relative;
  margin-left: 6px;
  vertical-align: baseline;
  pointer-events: auto;
}

.leditor-source-check-fix__chip {
  border: 1px solid color-mix(in srgb, var(--ui-accent) 25%, transparent);
  background: color-mix(in srgb, var(--ui-accent) 8%, transparent);
  color: var(--ui-accent);
  border-radius: 999px;
  padding: 1px 8px;
  font-size: 11px;
  line-height: 16px;
  cursor: pointer;
}
.leditor-source-check-fix__chip:hover {
  background: color-mix(in srgb, var(--ui-accent) 12%, transparent);
}

/* Portal popover so it never gets clipped by A4 page overflow. */
.leditor-source-check-fix-popover {
  position: fixed;
  z-index: 4000;
  width: 280px;
  max-width: calc(100vw - 16px);
  padding: 10px 10px 8px;
  border-radius: 12px;
  background: color-mix(in srgb, var(--ui-surface) 96%, transparent);
  border: 1px solid var(--ui-border-color);
  box-shadow: var(--ui-shadow-2);
  overflow: hidden;
  pointer-events: auto;
}

.leditor-app.theme-dark .leditor-source-check-fix-popover {
  background: color-mix(in srgb, var(--ui-surface) 90%, transparent);
  border-color: var(--ui-border-color);
}

.leditor-source-check-fix-popover__text {
  font-size: 11.5px;
  line-height: 1.25;
  color: var(--ui-text);
  white-space: pre-wrap;
}
.leditor-app.theme-dark .leditor-source-check-fix-popover__text {
  color: var(--ui-text);
}

.leditor-source-check-fix-popover__actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 8px;
}

.leditor-source-check-fix-popover__btn {
  border: 1px solid var(--ui-border-color);
  background: color-mix(in srgb, var(--ui-surface) 92%, transparent);
  color: var(--ui-text);
  border-radius: 10px;
  padding: 5px 8px;
  font-size: 11px;
  line-height: 1;
  cursor: pointer;
}
.leditor-app.theme-dark .leditor-source-check-fix-popover__btn {
  border-color: var(--ui-border-color);
  background: color-mix(in srgb, var(--ui-surface-2) 80%, transparent);
  color: var(--ui-text);
}

.leditor-source-check-fix-popover__btn--primary {
  border-color: color-mix(in srgb, var(--ui-accent) 40%, var(--ui-border-color));
  background: color-mix(in srgb, var(--ui-accent) 75%, transparent);
  color: var(--ui-accent-contrast);
}
.leditor-source-check-fix-popover__btn--primary:hover {
  background: color-mix(in srgb, var(--ui-accent) 85%, transparent);
}

@keyframes leditor-source-check-pulse {
  0% {
    outline-color: color-mix(in srgb, var(--ui-accent) 0%, transparent);
    box-shadow: 0 0 0 color-mix(in srgb, var(--ui-accent) 0%, transparent);
  }
  30% {
    outline-color: color-mix(in srgb, var(--ui-accent) 55%, transparent);
    box-shadow: 0 0 0 4px color-mix(in srgb, var(--ui-accent) 12%, transparent);
  }
  100% {
    outline-color: color-mix(in srgb, var(--ui-accent) 0%, transparent);
    box-shadow: 0 0 0 color-mix(in srgb, var(--ui-accent) 0%, transparent);
  }
}
